# EarthLord 游戏设计文档 (GDD)

## 文档信息
| 项目 | 内容 |
|------|------|
| 游戏名称 | EarthLord (地主) |
| 游戏类型 | LBS生存建造游戏 |
| 目标平台 | iOS |
| 目标评级 | 12+ |
| 文档版本 | 1.0 |
| 文档日期 | 2025-12-23 |

---

## 1. 游戏概述

### 1.1 核心概念
EarthLord是一款将真实世界行走与虚拟生存游戏相结合的LBS游戏。玩家扮演末日后的幸存者，通过真实世界的移动来圈占虚拟土地，探索真实地标获取资源，建设自己的领地，最终重建文明。

### 1.2 一句话描述
**"用脚步丈量你的王国" - 末日废土上的真实行走生存游戏**

### 1.3 游戏风格
**希望朋克 (Hopepunk)**
- 废土之上的新生
- 绝望中的希望
- 破败建筑上生长的绿色植物
- 末日美学与重建主题的结合

### 1.4 核心玩法循环
```
登录注册 → 圈地占领 → 探索搜刮 → 获得资源
    ↑                              ↓
    │         ┌──────────────────────┐
    │         │ 资源用途:              │
    │         │ • 建造建筑(消耗资源)    │
    │         │ • 交易换物(流通资源)    │
    │         │ • 生存消耗(食物/水)     │
    │         └──────────────────────┘
    │                              ↓
    └──────── 通讯社交 ← 成就排行 ← 发展壮大
```

---

## 2. 世界观与叙事

### 2.1 时间线

| 时间 | 事件 |
|------|------|
| 2048年 | "世界战争"爆发 |
| 2048年+72小时 | 全球文明崩塌，99%人口消失 |
| 2051年 | 幸存者从废墟中走出 |
| 2051年 | 《新开拓者协议》颁布 |
| 游戏开始 | 玩家作为新开拓者加入 |

### 2.2 《新开拓者协议》核心法则
> **"凡以双足丈量之无主土地，皆为开拓者所有。"**

这条法则类似于沙滩上画圈占地的游戏规则：
- 玩家拿着"树枝"(手机GPS)
- 从一个点开始，绕着走一大圈
- 回到起点，圈起来的区域归玩家所有
- 每一步都被"卫星"(GPS)记录

### 2.3 世界设定

#### 2.3.1 旧世界遗产
- 旧账号系统仍可使用(Apple ID、Google账号)
- 真实世界的地标(POI)成为资源点
- 货币体系崩溃，以物易物为主

#### 2.3.2 新世界规则
- 领地必须30天内开始建设
- 领地必须90天内保持活跃
- 否则土地将被回收为"无主之地"

### 2.4 玩家角色
**开拓者 (Pioneer)**
- 从避难所醒来的幸存者
- 需要登记身份加入《新开拓者协议》
- 目标是重建家园、建立文明

---

## 3. 核心游戏机制

### 3.1 圈地系统

#### 3.1.1 基本流程
1. 打开App，查看末日风格卫星地图
2. 点击"开始开拓"按钮
3. 开始真实世界的行走
4. 行走轨迹实时显示为蓝色线条
5. 回到起点附近(20米内)
6. 轨迹自动闭合成多边形
7. 系统验证圈地合法性
8. 验证通过，土地归玩家所有

#### 3.1.2 圈地规则
| 规则 | 描述 |
|------|------|
| 最小面积 | 100平方米 |
| 最大面积 | 无上限(取决于体力) |
| 重叠检测 | 不能与其他玩家领地重叠 |
| 防作弊 | GPS速度异常检测 |
| 闭合距离 | 距起点20米内自动闭合 |

#### 3.1.3 视觉反馈
- **圈地中**: 蓝色轨迹线
- **待验证**: 黄色多边形
- **验证通过**: 绿色多边形
- **验证失败**: 红色闪烁后消失

### 3.2 探索系统

#### 3.2.1 POI类型与资源
| POI类型 | 图标 | 产出资源 | 稀有度 |
|---------|------|----------|--------|
| 医院 | 红十字 | 药品、急救包、抗生素 | 稀有 |
| 药店 | 药瓶 | 药品、绷带 | 普通 |
| 超市 | 购物车 | 罐头、饮用水、食物 | 普通 |
| 餐厅 | 餐具 | 罐头食品 | 普通 |
| 工厂 | 齿轮 | 金属、零件 | 稀有 |
| 工地 | 安全帽 | 金属、石材、木材 | 普通 |
| 公园 | 树木 | 木材、植物 | 普通 |
| 银行 | 金库 | 稀有材料、卫星模块 | 史诗 |
| 珠宝店 | 钻石 | 稀有材料 | 史诗 |

#### 3.2.2 探索机制
- **发现范围**: 50米内自动发现POI
- **搜刮冷却**: 同一POI 24小时冷却
- **探索记录**: 记录距离、时长、收获

#### 3.2.3 探索奖励公式
```
基础奖励 = POI等级 × 资源系数
最终奖励 = 基础奖励 × (1 + 探索距离加成) × (1 + 会员加成)
```

### 3.3 资源系统

#### 3.3.1 资源分类
| 分类 | 资源类型 | 获取方式 | 用途 |
|------|----------|----------|------|
| 基础材料 | 木材、石材、金属 | POI搜刮 | 建造建筑 |
| 生存物资 | 食物、水、药品 | POI搜刮 | 维持生存体征 |
| 特殊材料 | 电子元件、卫星模块 | 稀有POI | 高级建筑 |
| 布料 | 布料 | POI搜刮 | 制作物品 |

#### 3.3.2 背包系统
| 参数 | 默认值 | 升级后 |
|------|--------|--------|
| 容量上限 | 100格 | 可通过建造仓库扩展 |
| 堆叠上限 | 99个/格 | - |
| 分类数 | 5类 | - |

### 3.4 建造系统

#### 3.4.1 建筑等级体系
```
Tier 1 (生存基础)
    ↓
Tier 2 (功能扩展)
    ↓
Tier 3 (高级设施)
```

#### 3.4.2 建筑列表

**Tier 1 - 生存基础**
| 建筑 | 分类 | 材料需求 | 功能 |
|------|------|----------|------|
| 篝火 | 生存 | 石头×20, 木材×30 | 取暖、照明 |
| 简易帐篷 | 生存 | 布料×15, 木材×20 | 休息恢复 |
| 储物箱 | 储存 | 木材×40 | 扩展存储+20 |

**Tier 2 - 功能扩展**
| 建筑 | 分类 | 材料需求 | 功能 |
|------|------|----------|------|
| 庇护所 | 生存 | 木材×100, 石材×50 | 休息、抵御天气 |
| 小仓库 | 储存 | 木材×80, 金属×20 | 扩展存储+50 |
| 简易农田 | 生产 | 木材×30, 水×10 | 生产食物 |
| 工作台 | 生产 | 木材×60, 金属×30 | 制作物品 |

**Tier 3 - 高级设施**
| 建筑 | 分类 | 材料需求 | 功能 |
|------|------|----------|------|
| 太阳能板 | 能源 | 金属×100, 电子×20 | 提供电力 |
| 风力发电机 | 能源 | 金属×150, 电子×30 | 提供电力 |
| 中仓库 | 储存 | 金属×100, 石材×80 | 扩展存储+100 |
| 高级农场 | 生产 | 木材×200, 金属×50 | 高产食物 |

#### 3.4.3 建筑状态机
```
[建造中] ─完工→ [待激活] ─激活→ [运行中]
                    ↑            │
                    │            ↓(受损)
                    └──修复──── [损坏]
```

| 状态 | 可执行操作 |
|------|------------|
| 建造中 | 取消建造 |
| 待激活 | 激活、拆除 |
| 运行中 | 升级、停用、拆除 |
| 损坏 | 修复、拆除 |

### 3.5 交易系统

#### 3.5.1 交易类型
**挂单交易 (以物易物)**
- 发布挂单: 指定"我提供"和"我需要"的物品
- 挂单可见范围: 100米内的其他玩家
- 交易触发: 双方进入100米范围内

#### 3.5.2 交易流程
```
卖方发布挂单 → 买方发现挂单 → 买方接受交易 →
物品自动交换 → 双方收到通知
```

#### 3.5.3 交易规则
| 规则 | 描述 |
|------|------|
| 触发距离 | 100米内 |
| 挂单有效期 | 7天 |
| 同时挂单数 | 最多5个 |
| 交易冷却 | 无 |

### 3.6 生存体征系统

#### 3.6.1 体征参数
| 体征 | 满值 | 衰减速度 | 低于阈值效果 |
|------|------|----------|--------------|
| 核心生命 | 100 | 依赖饥饿/口渴 | 归零则死亡 |
| 饱食度 | 100% | -5/小时 | <30%开始掉血 |
| 水分 | 100% | -10/小时 | <20%开始掉血 |

#### 3.6.2 体征增益
| 条件 | 增益效果 |
|------|----------|
| 饱食度 > 80% | 探索效率+10% |
| 水分 > 80% | 移动速度+10% |
| 双满 > 80% | 额外经验+20% |

#### 3.6.3 恢复方式
| 物品类型 | 恢复效果 |
|----------|----------|
| 罐头食品 | 饱食度+15 |
| 饮用水 | 水分+20 |
| 急救包 | 生命+30 |
| 药品 | 状态恢复 |

---

## 4. 通讯系统设计

### 4.1 设备等级体系
```
收音机 → 对讲机 → 营地电台 → 卫星通讯
 (0)      (1)       (2)        (3)
```

| 设备 | 解锁条件 | 功能 | 范围 |
|------|----------|------|------|
| 收音机 | 初始装备 | 只能接收 | - |
| 对讲机 | 消耗资源升级 | 收发消息 | 3km |
| 营地电台 | 建造后解锁 | 收发+频道 | 10km |
| 卫星通讯 | 高级材料建造 | 全功能 | 全球 |

### 4.2 频道系统

#### 4.2.1 频道类型
| 类型 | 描述 | 加入条件 |
|------|------|----------|
| 公共频道 | 基于位置的开放聊天 | 自动加入 |
| 私人频道 | 玩家创建的群组 | 邀请/申请 |
| 联盟频道 | 联盟专属 | 加入联盟 |

#### 4.2.2 公共频道机制
- 覆盖范围: 以玩家为中心3km半径
- 可见消息: 发送时在范围内的玩家
- 实时性: 消息秒级送达

### 4.3 PTT呼叫
**操作方式**: 长按说话，松开发送

**显示信息**:
- 当前频率
- 发送状态
- 接收玩家数

---

## 5. 成长系统

### 5.1 玩家等级
| 等级 | 称号 | 经验需求 | 解锁内容 |
|------|------|----------|----------|
| 1-5 | 新手开拓者 | 0-1000 | 基础功能 |
| 6-10 | 拾荒者 | 1001-5000 | Tier 2建筑 |
| 11-20 | 领主 | 5001-20000 | 高级交易 |
| 21-30 | 重建者 | 20001-50000 | Tier 3建筑 |
| 31+ | 传奇开拓者 | 50001+ | 全部内容 |

### 5.2 成就系统

#### 5.2.1 成就分类
| 分类 | 示例成就 |
|------|----------|
| 新手引导 | 第一次圈地、第一次搜刮 |
| 探索成就 | 探索100个POI、行走100km |
| 建设成就 | 建造10个建筑、升级建筑到Tier 3 |
| 社交成就 | 完成10次交易、加入联盟 |
| 生存成就 | 存活100天、保持满状态24小时 |

#### 5.2.2 成就稀有度
| 稀有度 | 颜色 | 奖励倍率 |
|--------|------|----------|
| 普通 | 灰色 | 1x |
| 稀有 | 蓝色 | 2x |
| 史诗 | 紫色 | 5x |
| 传说 | 金色 | 10x |

### 5.3 排行榜

#### 5.3.1 排行榜类型
| 排行榜 | 统计指标 | 刷新频率 |
|--------|----------|----------|
| 领地面积榜 | 总领地面积(m²) | 5分钟 |
| 探索废墟榜 | 搜刮POI次数 | 5分钟 |
| 建筑数量榜 | 建造建筑数 | 5分钟 |

#### 5.3.2 榜单奖励
| 排名 | 每周奖励 |
|------|----------|
| 第1名 | 稀有资源包×3 |
| 第2-3名 | 稀有资源包×2 |
| 第4-10名 | 稀有资源包×1 |
| 第11-100名 | 普通资源包×1 |

---

## 6. 经济系统

### 6.1 资源流通

```
POI搜刮 ──→ 背包 ──→ 建造消耗
   │          │         │
   │          ↓         │
   │       交易流通 ←────┘
   │          │
   ↓          ↓
生存消耗 ←─ 使用物品
```

### 6.2 付费设计

#### 6.2.1 订阅服务
| 订阅档位 | 价格 | 权益 |
|----------|------|------|
| 开拓者月卡 | $9.99/月 | 无限探索、范围扩大50% |
| 领主通行证 | $19.99/月 | 全部特权、专属建筑图纸 |

#### 6.2.2 资源包
| 资源包 | 价格 | 内容 |
|--------|------|------|
| 初级物资包 | $0.99 | 食物×50、水×50 |
| 中级物资包 | $2.99 | 基础材料各×100 |
| 稀有资源包 | $9.99 | 稀有材料×20、电子×10 |

#### 6.2.3 付费点设计原则
- **不卖土地**: 土地只能通过行走获得
- **不卖战力**: 不存在战斗系统
- **卖便利性**: 加速、扩容、外观
- **卖体验**: VIP专属内容

---

## 7. UI/UX设计

### 7.1 主界面布局
```
┌─────────────────────────────┐
│      卫星地图视图            │
│   (玩家位置、领地、POI)       │
│                             │
│        [玩家蓝点]            │
│                             │
│   [POI图标]  [领地边界]       │
│                             │
├─────────────────────────────┤
│ [开始开拓]  [背包]  [建造]    │
├─────────────────────────────┤
│ 地图 | 通讯 | 排行 | 个人     │
└─────────────────────────────┘
```

### 7.2 色彩方案
| 元素 | 颜色 | 用途 |
|------|------|------|
| 主色调 | 废土棕 #8B7355 | 背景、边框 |
| 强调色 | 希望绿 #4CAF50 | 领地、正面反馈 |
| 警告色 | 危险红 #F44336 | 低体征、警告 |
| 中性色 | 科技蓝 #2196F3 | 圈地轨迹、信息 |
| 稀有色 | 史诗紫 #9C27B0 | 稀有物品、成就 |
| 传说色 | 传说金 #FFD700 | 传说物品、顶级成就 |

### 7.3 地图风格
- **卫星视图**: 真实卫星地图作为基础
- **末日滤镜**: 添加废土色调滤镜
- **希望元素**: 绿色植物、新建标记
- **POI图标**: 末日主题定制图标

### 7.4 音效设计
| 场景 | 音效风格 |
|------|----------|
| 圈地成功 | 胜利号角+绿植生长 |
| 搜刮发现 | 金属碰撞+电子提示 |
| 建造完成 | 锤击声+升起音效 |
| 交易成功 | 握手音效+金币声 |
| 生命警告 | 心跳声+警报 |

---

## 8. 技术设计

### 8.1 核心架构
```
┌──────────────┐
│   SwiftUI    │  UI层
├──────────────┤
│  Managers    │  业务逻辑层
├──────────────┤
│  Services    │  服务层
├──────────────┤
│   Supabase   │  后端服务
└──────────────┘
```

### 8.2 数据同步策略
**本地优先架构**:
1. 数据先写入本地存储
2. 后台异步同步到云端
3. 冲突时以服务器为准
4. 离线时仍可使用大部分功能

### 8.3 防作弊机制
| 作弊类型 | 检测方式 |
|----------|----------|
| GPS欺骗 | 速度异常检测(>50km/h) |
| 位置跳跃 | 连续性检测 |
| 时间作弊 | 服务器时间校验 |
| 数据篡改 | 服务器验证 |

---

## 9. 游戏平衡

### 9.1 资源产出平衡
| 活跃度 | 日产出资源 | 日消耗资源 | 净收入 |
|--------|------------|------------|--------|
| 低(30分钟) | 50 | 48 | +2 |
| 中(1小时) | 120 | 48 | +72 |
| 高(2小时) | 280 | 48 | +232 |

### 9.2 成长曲线
- **前期(1-7天)**: 快速成长，每日可见进度
- **中期(8-30天)**: 稳定成长，社交需求增加
- **后期(30天+)**: 慢速成长，依赖合作

### 9.3 留存设计
| 时间点 | 留存钩子 |
|--------|----------|
| 次日 | 登录奖励、任务系统 |
| 3日 | 建筑完成、成就解锁 |
| 7日 | 周排行结算、联盟活动 |
| 30日 | 月度成就、领地危机 |

---

## 10. 后续规划

### 10.1 功能扩展
| 版本 | 新功能 |
|------|--------|
| v1.1 | 联盟系统、领地战争 |
| v1.2 | NPC商人、任务系统 |
| v1.3 | 天气系统、季节变化 |
| v2.0 | 跨服竞技、全球事件 |

### 10.2 内容扩展
| 类型 | 计划内容 |
|------|----------|
| 建筑 | 新增20种建筑 |
| POI | 新增10种POI类型 |
| 资源 | 新增稀有资源线 |
| 成就 | 新增100个成就 |

---

## 附录A: 数值表

### A.1 建筑建造时间
| 建筑等级 | 建造时间 |
|----------|----------|
| Tier 1 | 5分钟 |
| Tier 2 | 30分钟 |
| Tier 3 | 2小时 |

### A.2 经验值获取
| 行为 | 经验值 |
|------|--------|
| 圈地100m² | 10 EXP |
| 搜刮POI | 5 EXP |
| 建造建筑 | 20 EXP |
| 完成交易 | 10 EXP |
| 行走1km | 15 EXP |

### A.3 生存体征衰减
| 体征 | 衰减/小时 | 临界值 | 临界效果 |
|------|-----------|--------|----------|
| 饱食度 | -5 | 30% | 生命-2/小时 |
| 水分 | -10 | 20% | 生命-3/小时 |

---

## 附录B: 术语表

| 术语 | 定义 |
|------|------|
| 开拓者 | 玩家角色的统称 |
| 领地 | 玩家圈占的土地 |
| POI | Point of Interest，兴趣点/地标 |
| PTT | Push to Talk，按住说话 |
| 希望朋克 | 游戏的视觉风格 |
| LBS | Location-Based Service，基于位置的服务 |

---

*文档结束*
